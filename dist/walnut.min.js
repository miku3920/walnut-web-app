!function(t,e){"object"==typeof exports?(module.exports=e(),exports.utils=module.exports.utils,exports.event=module.exports.event):"function"==typeof define&&define.amd?define([],e):t.walnut=e()}(self,(()=>{return t={278:(t,e,n)=>{var i={utils:n(797),event:n(532)};t.exports=i},418:t=>{var e=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),n={extend:function(t){var n=e(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},i=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||r).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var s=0;s<r;s+=4)e[i+s>>>2]=n[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=Math.ceil(e/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t}}),r={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new i.init(n,e/2)}},o=function(t){return function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new i.init(n,e)}(unescape(encodeURIComponent(t)))},a=n.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=o(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e,n=this._data,r=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?Math.ceil(s):Math.max((0|s)-this._minBufferSize,0))*a,u=Math.min(4*c,o);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(r,f);e=r.splice(0,c),n.sigBytes-=u}return new i.init(e,u)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),s=a.extend({cfg:n.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){a.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16}),c=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),a=this._iKey=e.clone(),s=r.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}}),u=[],f=[];!function(){function t(t){for(var e=Math.sqrt(t),n=2;n<=e;n++)if(!(t%n))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(u[i]=e(Math.pow(n,.5))),f[i]=e(Math.pow(n,1/3)),i++),n++}();var h=[],l=s.extend({_doReset:function(){this._hash=new i.init(u.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],p=0;p<64;p++){if(p<16)h[p]=0|t[e+p];else{var d=h[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,g=h[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;h[p]=v+h[p-7]+y+h[p-16]}var _=i&r^i&o^r&o,w=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),x=l+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+f[p]+h[p];l=u,u=c,c=s,s=a+x|0,a=o,o=r,r=i,i=x+(w+_)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});t.exports=function(t,e,n){var i=new c.init(l,e).finalize(t);return n?i.toString():i}},532:t=>{var e={},n=function(){},i=void 0!==window.TelegramWebviewProxy?function(t,e){return function(){window.external&&window.external.invoke&&window.external.invoke(JSON.stringify([t,e]))}}:function(t,e){return function(){console.log("[Walnut.debug] postEvent",t,e)}};function r(t,r){var o={type:t,data:r,post:i(t,r)},a=e[t]||e.default||n;try{a(o)}catch(t){}var s=e.all||n;try{s(o)}catch(t){}}e.default=function(t){console.log("[Walnut.default] postEvent",t.type,t.data)},e.all=n,window.TelegramWebviewProxy={postEvent:r},t.exports={on:function(t,n){e[t]=n},off:function(t){e[t]=n},receive:r}},797:(t,e,n)=>{var i=n(418);function r(t){var e=[];return Object.keys(t).sort().forEach((function(n){e.push(n+"="+t[n])})),e.join("\n")}function o(t){var e=t.token;delete t.token;var n=r(t),o=i(e,"WebAppData");return i(n,o,!0)}function a(t){return JSON.stringify(t).replace(/\//g,"\\/")}function s(t){return void 0!==t.user&&(t.user=a(t.user)),void 0!==t.receiver&&(t.receiver=a(t.receiver)),void 0!==t.chat&&(t.chat=a(t.chat)),t}function c(t){try{t=encodeURIComponent(t)}catch(t){}return t}function u(t){var e=[];return Object.keys(t).forEach((function(n){e.push(c(n)+"="+c(t[n]))})),e.join("&")}function f(t){var e=t.Debug?"1":"",n=JSON.stringify(t.ThemeParams),i=t.Version+"",r=s(t.Data);r.hash=o(r);var a={tgWebAppData:u(r),tgWebAppVersion:i,tgWebAppThemeParams:n};return void 0!==t.Debug&&(a.tgWebAppDebug=e),"#"+u(a)}function h(t){(t=t||{}).Data=t.Data||{},t.Data.user=t.Data.user||{id:127355800,first_name:"初音",last_name:"ミク",username:"miku3920",language_code:"zh-hant"},t.Data.auth_date=t.Data.auth_date||Date.now(),t.Data.token=t.Data.token||"1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ",t.Version=t.Version||"6.2",t.ThemeParams=t.ThemeParams||{bg_color:"#ffffff",button_color:"#40a7e3",button_text_color:"#ffffff",hint_color:"#999999",link_color:"#168acd",text_color:"#000000"},t.Debug=t.Debug||!0,window.location.hash=f(t)}h(),t.exports={setup:h,urlStringifyHashString:f,urlStringifyQueryParams:u,urlSafeEncode:c,stringifyDataParams:s,dataSafeStringify:a,createVerificationHash:o,buildDataCheckString:r,HMAC_SHA256:i}}},e={},function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}(278);var t,e}));
//# sourceMappingURL=walnut.min.js.map